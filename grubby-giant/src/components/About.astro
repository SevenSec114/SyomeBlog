---
import GithubStats from "./GithubStats.astro";

interface Props {
  profileImage?: string;
  name?: string;
  description?: string;
  socialLinks?: Array<{ name: string; url: string; icon?: string }>;
  skills?: Array<{ category: string; items: string[] }>;
  githubUsername?: string;
  experiences?: Array<{ 
    title: string; 
    company: string; 
    period: string; 
    description: string;
    borderColor: string;
  }>;
  interests?: Array<{ 
    name: string; 
    description: string; 
    tags: string[]; 
    image?: string;
    url?: string;
  }>;
  interestsTitle?: string;
}

const {
  profileImage = "",
  name = "About Me",
  description = "",
  socialLinks = [],
  skills = [],
  githubUsername = "",
  experiences = [],
  interests = [],
  interestsTitle = "Loves"
} = Astro.props;
---

<section class="mt-12 bg-gray-50 dark:bg-gray-800 rounded-xl p-6">
  <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">{name}</h2>
  <div class="flex flex-col md:flex-row gap-6">
    {profileImage && (
      <div class="md:w-1/3 flex justify-center">
        <img 
          src={profileImage}
          alt="Profile picture" 
          class="rounded-2xl w-48 h-48 object-cover border-4 border-white dark:border-gray-700 shadow-lg"
        />
      </div>
    )}
    <div class="md:w-2/3 mb-8">
      {description && (
        <p class="text-gray-700 dark:text-gray-300 mb-4">
          {description}
        </p>
      )}
      {socialLinks.length > 0 && (
        <div class="flex space-x-4">
          {socialLinks.map((link) => (
            <a 
              href={link.url} 
              target="_blank" 
              class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium"
            >
              {link.name}
            </a>
          ))}
        </div>
      )}
    </div>
  </div>

  <hr>

  {skills.length > 0 && (
    <div class="mt-8 mb-8">
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Skills & Technologies</h3>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
        {skills.map((skill) => (
          <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
            <h4 class="font-medium text-gray-900 dark:text-white mb-2">{skill.category}</h4>
            <ul class="text-gray-600 dark:text-gray-300 text-sm space-y-1">
              {skill.items.map((item) => (
                <li>{item}</li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  )}

  <hr>

  {githubUsername && <GithubStats username={githubUsername} />}

  <hr>

  {experiences.length > 0 && (
    <div class="mt-8 mb-8">
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Experience</h3>
      <div class="space-y-4">
        {experiences.map((exp) => (
          <div class={`border-l-4 border-${exp.borderColor}-500 pl-4 py-1`}>
            <h4 class="font-medium text-gray-900 dark:text-white">{exp.title}</h4>
            <p class="text-gray-600 dark:text-gray-400 text-sm">{exp.company} â€¢ {exp.period}</p>
            <p class="text-gray-700 dark:text-gray-300 mt-2 text-sm">
              {exp.description}
            </p>
          </div>
        ))}
      </div>
    </div>
  )}

  <hr>

  {(interests.length > 0 || interestsTitle) && (
    <div class="mt-8 mb-8">
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">{interestsTitle}</h3>
      
      <div class="space-y-6">
        {interests.map((interest, index) => (
          <div class={`flex items-center ${index % 2 === 0 ? '' : 'flex-row-reverse'}`}>
            {index % 2 === 0 ? (
              <>
                {interest.image && (
                  <div class="mr-4 transition-transform duration-300 hover:-rotate-12">
                    <img 
                      src={interest.image}
                      alt={interest.name} 
                      class="w-16 h-16 rounded-2xl"
                    />
                  </div>
                )}
                <div class="flex-1 text-center">
                  {interest.url ? (
                    <a href={interest.url} target="_blank" rel="noopener noreferrer">
                      <h4 class="text-lg font-bold text-gray-900 dark:text-white">{interest.name}</h4>
                    </a>
                  ) : (
                    <h4 class="text-lg font-bold text-gray-900 dark:text-white">{interest.name}</h4>
                  )}
                  <div class="flex flex-wrap justify-center gap-2 mt-2">
                    {interest.tags.map((tag) => (
                      <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm">{tag}</span>
                    ))}
                  </div>
                </div>
              </>
            ) : (
              <>
                <div class="flex-1 text-center">
                  {interest.url ? (
                    <a href={interest.url} target="_blank" rel="noopener noreferrer">
                      <h4 class="text-lg font-bold text-gray-900 dark:text-white">{interest.name}</h4>
                    </a>
                  ) : (
                    <h4 class="text-lg font-bold text-gray-900 dark:text-white">{interest.name}</h4>
                  )}
                  <div class="flex flex-wrap justify-center gap-2 mt-2">
                    {interest.tags.map((tag) => (
                      <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm">{tag}</span>
                    ))}
                  </div>
                </div>
                {interest.image && (
                  <div class="ml-4 transition-transform duration-300 hover:rotate-12">
                    <img 
                      src={interest.image}
                      alt={interest.name} 
                      class="w-16 h-16 rounded-2xl"
                    />
                  </div>
                )}
              </>
            )}
          </div>
        ))}
      </div>
    </div>
  )}
</section>